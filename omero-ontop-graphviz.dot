// BUILT UPON BASELINE BY CHAT GPT - 5
// NEEDS MORE REVIEWS
digraph OMERO_OBDA_BEAUTIFUL {
    rankdir = LR;
    fontname = "Helvetica";
    
    // --- Defaults ---
    node [fontname = "Helvetica";];
    edge [fontname = "Helvetica";];
    graph [splines = true; overlap = false; bgcolor = "white";];
    
    // =========================
    // Core entity classes
    // =========================
    subgraph cluster_entities {
        label = "Common OMERO-RDF / OMERO-ONTOP classes";
        style = filled;
        color = lightgrey;
        
        Project [label = "Project\n(omeld-core:Project)";shape = box;style = "rounded,filled";fillcolor = white;];
        Dataset [label = "Dataset\n(omeld-core:Dataset)";shape = box;style = "rounded,filled";fillcolor = white;];
        Image [label = "Image\n(omeld-core:Image)";shape = box;style = "rounded,filled";fillcolor = white;];
        Pixels [label = "Pixels\n(omeld-core:Pixels)";shape = box;style = "rounded,filled";fillcolor = white;];
        ROI [label = "ROI\n(omeld-core:ROI)";shape = box;style = "rounded,filled";fillcolor = white;];
        Screen [label = "Screen\n(omeld-core:Screen)";shape = box;style = "rounded,filled";fillcolor = white;];
        Plate [label = "Plate\n(omeld-core:Plate)";shape = box;style = "rounded,filled";fillcolor = white;];
        Well [label = "Well\n(omeld-core:Well)";shape = box;style = "rounded,filled";fillcolor = white;];
    }
    // Tags flattened as literals
    
    edge [color = "#00000055";];
    Dataset -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Image -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Project -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Screen -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Plate -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    PlateAcq -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Reagent -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    Well -> "Tag text" [label = "omeld-kg:tag_annotation_value";];
    edge [color = "#000000";];
    
    subgraph cluster_entities_2 {
        label = "Only on OMERO-ONTOP classes";
        style = filled;
        color = lightgreen;
        
        Channel [label = "Channel\n(omeld-core:Channel)";shape = box;style = "rounded,filled";fillcolor = white;];
        WellSample [label = "WellSample\n(omeld-core:WellSample)";shape = box;style = "rounded,filled";fillcolor = white;];
        PlateAcq [label = "PlateAcquisition\n(omeld-core:PlateAcquisition)";shape = box;style = "rounded,filled";fillcolor = white;];
        Reagent [label = "Reagent\n(omeld-core:Reagent)";shape = box;style = "rounded,filled";fillcolor = white;];
        Expmtr [label = "Experimenter\n(omeld-core:Experimenter)";shape = box;style = "rounded,filled";fillcolor = white;];
        ExpGrp [label = "ExperimenterGroup\n(omeld-core:ExperimenterGroup)";shape = box;style = "rounded,filled";fillcolor = white;];
        
        
        
        Channel -> "xsd:integer" [label = "omeld-kg:red";];
        Channel -> "xsd:integer" [label = "omeld-kg:green";];
        Channel -> "xsd:integer" [label = "omeld-kg:blue";];
        "xsd:integer" [shape = ellipse;style = "filled";fillcolor = "lightyellow";];
        "xsd:string" [shape = ellipse;style = filled;fillcolor = lightyellow;];
    }
    
    // =========================
    // Structural relationships
    // =========================
    // Datasets & Images
    Dataset -> Image [label = "omeld-core:image";];
    
    // Projects ↔ Datasets
    Project -> Dataset [label = "omeld-core:dataset";];
    
    // Pixels / Image / ROI / Channel
    Pixels -> Image [label = "omeld-kg:image";];
    ROI -> Image [label = "omeld-core:image";];
    Channel -> Pixels [label = "omeld-kg:pixels";];
    
    // Screens, Plates, Wells
    Well -> Plate [label = "omeld-core:plate";];
    // Plate ↔ Screen (both directions exist in mappings)
    Plate -> Screen [dir = both; label = "omeld-core:plate / omeld-kg:screen";];
    
    // WellSample joins
    WellSample -> Well [label = "omeld-core:well";];
    WellSample -> PlateAcq [label = "omeld-core:run";];
    WellSample -> Image [label = "omeld-core:image";];
    
    // Reagents linked from Wells
    Well -> Reagent [label = "omeld-kg:reagent";];
    
    // Ownership & Group (pattern shown on representative nodes)
    Project -> Expmtr [label = "omeld-core:owner";];
    Project -> ExpGrp [label = "omeld-core:group";];
    
    ExpGrp -> "xsd:string" [label = "foaf:name";];
    
    Expmtr -> "xsd:string" [label = "foaf:firstName";];
    Expmtr -> "xsd:string" [label = "foaf:lastName";];
    Expmtr -> "xsd:string" [label = "foaf:email";];
    Expmtr -> "xsd:string" [label = "foaf:name";];
    
    
    Image -> Expmtr [label = "omeld-core:owner";];
    Image -> ExpGrp [label = "omeld-core:group";];
    
    // =========================
    // Metadata literals (representative)
    // =========================
    edge [color = "#00000055";];
    Project -> "dc:identifier" [label = "dc:identifier";];
    Project -> "Name" [label = "rdfs:label";];
    Project -> "Object Description" [label = "rdfs:comment";];
    
    Dataset -> "dc:identifier" [label = "dc:identifier";];
    Dataset -> "Name" [label = "rdfs:label";];
    Dataset -> "Object Description" [label = "rdfs:comment";];
    
    Image -> "dc:identifier" [label = "dc:identifier";];
    Image -> "Name" [label = "rdfs:label";];
    Image -> "Object Description" [label = "rdfs:comment";];
    Image -> "xsd:dateTime" [label = "omeld-kg:acquisition_date";];
    edge [color = "#000000";];
    
    subgraph cluster_direct_literals {
        label = "(some) literals";
        style = filled;
        color = lightgray;
        
        "Name" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "Object Description" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "dc:identifier" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "Tag text" [shape = ellipse;style = "filled";fillcolor = "lightyellow";];
        "xsd:dateTime" [shape = ellipse;style = "filled";fillcolor = "lightyellow";];
    }
    
    
    
    
    subgraph cluster_pixels {
        label = "Statements for Pixels";
        style = filled;
        color = yellow;
        
        edge [color = "#00000055";];
        Pixels -> "SizeX" [label = "omeld-kg:physical_size_x";];
        Pixels -> "unit (xsd:string)" [label = "omeld-kg:physical_size_x_unit";];
        Pixels -> "SizeY" [label = "omeld-kg:physical_size_y";];
        Pixels -> "unit (xsd:string)" [label = "omeld-kg:physical_size_y_unit";];
        Pixels -> "SizeZ" [label = "omeld-kg:physical_size_z";];
        Pixels -> "unit (xsd:string)" [label = "omeld-kg:physical_size_z_unit";];
        edge [color = "#000000";];
        
        "unit (xsd:string)" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "SizeX" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "SizeY" [shape = ellipse;style = filled;fillcolor = lightyellow;];
        "SizeZ" [shape = ellipse;style = filled;fillcolor = lightyellow;];
    }
    
    
    // =========================
    // Flattened annotations (blue edges)
    // =========================
    edge [color = blue;];
    // Key–value annotations become dynamic predicates <namespace/key> with literal values.
    Project -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Dataset -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Image -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Screen -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Plate -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    PlateAcq -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Well -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    Reagent -> "KV handling" [label = "parse annotation"; style = "dashed"; arrowhead = "none";];
    
    
    
    subgraph cluster_annotation {
        label = "annotations handled as new URI + value";
        color = lightblue;
        style = filled;
        
        // Style for flattened annotation literal targets
        "KV handling" [shape = ellipse;style = "filled";fillcolor = "#e8f0ff";label = "http://www.openmicroscopy.org/ns/default/{key}\n (property)";];
        
        "KV handling" -> "{value}^^xsd:string" [shape = ellipse; style = "filled"; fillcolor = "lightyellow";];
        
        "{value}^^xsd:string" [shape = ellipse;style = "filled";fillcolor = "lightyellow";];
    }
    // Reset edge color
    edge [color = black;];
    
    // =========================
    // Prefix legend (compact)
    // =========================
    
    
    subgraph cluster_prefixes {
        label = "Non-standard Prefixes";
        style = dashed;
        color = "#aaaaaa";
        
        pref3 [shape = plaintext;label = "omeld-core: https://ld.openmicroscopy.org/core/";];
        pref4 [shape = plaintext;label = "omeld-kg: https://ld.openmicroscopy.org/omekg#";];
        pref4 [shape = plaintext;label = "[implitic annotation URI prefix]: http://www.openmicroscopy.org/ns/default/";];
    }
}